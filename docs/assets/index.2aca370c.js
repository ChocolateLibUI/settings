var v=Object.defineProperty;var S=(_,i,e)=>i in _?v(_,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):_[i]=e;var h=(_,i,e)=>(S(_,typeof i!="symbol"?i+"":i,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const y="modulepreload",x=function(_,i){return new URL(_,i).href},d={},w=function(i,e,t){if(!e||e.length===0)return i();const s=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=x(r,t),r in d)return;d[r]=!0;const n=r.endsWith(".css"),l=n?'[rel="stylesheet"]':"";if(!!t)for(let o=s.length-1;o>=0;o--){const m=s[o];if(m.href===r&&(!n||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":y,n||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),n)return new Promise((o,m)=>{a.addEventListener("load",o),a.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>i())};let g=(_,i)=>{var t;let e=new TextEncoder().encode(_);return _=new TextDecoder().decode(e.slice(0,i)),((t=_.at(-1))==null?void 0:t.charCodeAt(0))===65533?_.slice(0,-1):_};class p{constructor(i){h(this,"___valueListeners",[]);h(this,"___value");this.___value=i}addListener(i,e){if(this.___valueListeners.push(i),e){let t=this.get;t instanceof Promise?t.then(i):i(t)}return i}removeListener(i){let e=this.___valueListeners.indexOf(i);return e!=-1&&this.___valueListeners.splice(e,1),i}get get(){return this.___value}set set(i){this.___value!==i&&(this.___value=i,this.___update())}___update(){if(this.___valueListeners)for(let i=0,e=this.___valueListeners.length;i<e;i++)try{this.___valueListeners[i](this.___value)}catch(t){console.warn("Failed while calling value listeners ",t)}}compare(i){let e=this.get;return e instanceof Promise?e.then(t=>i!==t):i!==e}get inUse(){return this.___valueListeners.length!==0}hasListener(i){return this.___valueListeners.indexOf(i)!==-1}toJSON(){return this.___value}}class L extends p{constructor(e,t){super(e);h(this,"___limiters");h(this,"___limitersListeners",[]);this.___limiters=t}addLimiterListener(e,t){return this.___limitersListeners.push(e),t&&e(this),e}removeLimiterListener(e){let t=this.___limitersListeners.indexOf(e);return t!=-1&&this.___limitersListeners.splice(t,1),e}___updateLimiter(){if(this.___limitersListeners)for(let e=0,t=this.___limitersListeners.length;e<t;e++)try{this.___limitersListeners[e](this)}catch(s){console.warn("Failed while calling value listeners ",s)}}get limiters(){return this.___limiters}set limiters(e){e?this.___limiters=e:delete this.___limiters,this.___updateLimiter()}checkLimit(e){if(this.___limiters){for(let t=0;t<this.___limiters.length;t++)if(this.___limiters[t].func(e))return!1}return!0}checkLimitReason(e){if(this.___limiters){for(let t=0;t<this.___limiters.length;t++)if(this.___limiters[t].func(e))switch(typeof this.___limiters[t].reason){case"string":return this.___limiters[t].reason;case"function":return this.___limiters[t].reason(e)}}return!0}set set(e){e===this.___value||!this.checkLimit(e)||(this.___value=e,this.___update())}}class k extends L{constructor(e,t=-1/0,s=1/0,r,n){super(e,n);h(this,"_min");h(this,"_max");h(this,"_step");h(this,"halfStep",0);this._min=t,this._max=s,r&&(this._step=r,this.halfStep=r/2)}get min(){return this._min}set min(e){this._min=e;let t=Math.max(this._min,this.___value);this.___value!==t&&(this.___value=t,this.___update()),this.___updateLimiter()}get max(){return this._max}set max(e){this._max=e;let t=Math.min(this._max,this.___value);this.___value!==t&&(this.___value=t,this.___update()),this.___updateLimiter()}get step(){return this._step}set step(e){if(e){this._step=e,this.halfStep=e/2;let t=this.___value%this._step,s=t>this.halfStep?this.___value+(this._step-t):this.___value-t;s!==this.___value&&(this.___value=s,this.___update())}else delete this._step,this.halfStep=0;this.___updateLimiter()}set set(e){if(this._step){let t=e%this._step;e=t>this.halfStep?e+(this._step-t):e-t}e=Math.min(this._max,Math.max(this._min,e)),e!==this.___value&&this.checkLimit(e)&&(this.___value=e,this.___update())}}class b extends L{constructor(e,t,s,r,n){super(e,n);h(this,"_maxLength");h(this,"_maxByteLength");h(this,"___enums");this._maxLength=s,this._maxByteLength=r,this.___enums=t}get enums(){return this.___enums}set enums(e){if(e){if(this.___enums=e,!this.checkEnum(this.___value))for(const t in this.___enums){this.___value=t,this.___update();return}}else delete this.___enums;this.___updateLimiter()}get enum(){if(this.___enums)return this.___enums[this.___value]}checkEnum(e){return!this.___enums||e in this.___enums}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e,this._maxLength&&this.___value.length>this._maxLength&&(this.___value=this.___value.slice(0,this._maxLength),this.___update()),this.___updateLimiter()}get maxByteLength(){return this._maxByteLength}set maxByteLength(e){if(this._maxByteLength=e,this._maxByteLength){let t=g(this.___value,this._maxByteLength);this.___value!==t&&(this.___value=t,this.___update())}this.___updateLimiter()}set set(e){this._maxLength&&e.length>this._maxLength&&(e=e.slice(0,this._maxLength)),this._maxByteLength&&(e=g(e,this._maxByteLength)),e!==this.___value&&this.checkLimit(e)&&this.checkEnum(e)&&(this.___value=e,this.___update())}}let f={},E=_=>(f[_]=new c(_),f[_]);class c{constructor(i){h(this,"path");h(this,"settings",{});h(this,"subGroups",{});this.path=i}makeSubGroup(i){if(i in this.subGroups){console.warn("Sub group already registered "+i);return}else return this.subGroups[i]=new c(this.path+"/"+i)}makeBooleanSetting(i,e){if(i in this.settings)throw new Error("Settings already registered "+i);let t=localStorage[this.path+"/"+i],s=new p(t?JSON.parse(t):e);return s.addListener(r=>{localStorage[this.path+"/"+i]=JSON.stringify(r)},!t),this.settings[i]=s}makeNumberSetting(i,e,t,s,r,n){if(i in this.settings)throw new Error("Settings already registered "+i);let l=localStorage[this.path+"/"+i],u=new k(l?JSON.parse(l):e,t,s,r,n);return u.addListener(a=>{localStorage[this.path+"/"+i]=JSON.stringify(a)},!l),this.settings[i]=u}makeStringSetting(i,e,t,s,r,n){if(i in this.settings)throw new Error("Settings already registered "+i);let l=localStorage[this.path+"/"+i],u=new b(l?JSON.parse(l):e,t,s,r,n);return u.addListener(a=>{localStorage[this.path+"/"+i]=JSON.stringify(a)},!l),this.settings[i]=u}}(async()=>{let _=E((await w(()=>import("./package.2a356f60.js"),[],import.meta.url)).name),i=_.makeBooleanSetting("TestBool",!1),e=document.createElement("input");e.type="checkbox",document.body.appendChild(e),e.checked=await i.get,e.addEventListener("change",l=>{i.set=e.checked});let t=_.makeNumberSetting("TestNumber",10,2,99),s=document.createElement("input");s.type="number",s.min=String(t.min),s.max=String(t.max),document.body.appendChild(s),s.value=String(await t.get),s.addEventListener("change",async l=>{t.set=Number(s.value),s.value=String(await t.get)});let r=_.makeStringSetting("TestString","asdf",void 0,10),n=document.createElement("input");document.body.appendChild(n),n.value=await r.get,n.addEventListener("change",async l=>{r.set=n.value,n.value=await r.get})})();
