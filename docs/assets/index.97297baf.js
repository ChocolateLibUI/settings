(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();let u={},c=(s,e,i)=>(u[s]=new l(s,e,i),u[s]);class l{constructor(e,i,r){this.settings={},this.subGroups={},this.pathID=e,this.name=i,this.description=r}makeSubGroup(e,i,r){if(e in this.subGroups){console.warn("Sub group already registered "+e);return}return this.subGroups[e]=new l(this.pathID+"/"+e,i,r)}async addState(e,i,r=void 0){if(e in this.settings)throw new Error("Settings already registered "+e);let t=localStorage[this.pathID+"/"+e];t?i.set(JSON.parse(t)):r!==void 0&&i.set(await r),i.subscribe(n=>{localStorage[this.pathID+"/"+e]=JSON.stringify(n)},!t),this.settings[e]=i}}const d="@chocolatelibui/settings";let a=c(d,"Test Settings","Description of test settings");(async()=>{let s=a.makeBooleanSetting("TestBool","","",!1),e=document.createElement("input");e.type="checkbox",document.body.appendChild(e),e.checked=await s.get,e.addEventListener("change",o=>{s.set=e.checked});let i=a.makeNumberSetting("TestNumber","","",10,2,99),r=document.createElement("input");r.type="number",r.min=String(i.min),r.max=String(i.max),document.body.appendChild(r),r.value=String(await i.get),r.addEventListener("change",async o=>{i.set=Number(r.value),r.value=String(await i.get)});let t=a.makeStringSetting("TestString","","","asdf",void 0,10),n=document.createElement("input");document.body.appendChild(n),n.value=await t.get,n.addEventListener("change",async o=>{t.set=n.value,n.value=await t.get})})();
